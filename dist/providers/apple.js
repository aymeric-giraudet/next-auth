"use strict";var _jsonwebtoken=_interopRequireDefault(require("jsonwebtoken"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var _default=a=>_objectSpread({id:"apple",name:"Apple",type:"oauth",version:"2.0",scope:"name email",params:{grant_type:"authorization_code"},accessTokenUrl:"https://appleid.apple.com/auth/token",authorizationUrl:"https://appleid.apple.com/auth/authorize?response_type=code&id_token&response_mode=form_post",profileUrl:null,profile:a=>({id:a.sub,name:null==a.name?a.sub:a.name,email:a.email}),clientId:null,clientSecret:{appleId:null,teamId:null,privateKey:null,keyId:null},clientSecretCallback:function(){var a=_asyncToGenerator(function*(a){var{appleId:b,keyId:c,teamId:d,privateKey:e}=a,f=_jsonwebtoken.default.sign({iss:d,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+15552000,aud:"https://appleid.apple.com",sub:b},e,{algorithm:"ES256",keyid:c});return Promise.resolve(f)});return function clientSecretCallback(){return a.apply(this,arguments)}}()},a);exports.default=_default;