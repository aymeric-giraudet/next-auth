"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var set=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},e="object"==typeof c?"j:"+JSON.stringify(c):c+"";"maxAge"in d&&(d.expires=new Date(Date.now()+d.maxAge),d.maxAge/=1e3);var f=a.getHeader("Set-Cookie")||[];f.push(_serialize(b,e+"",d)),a.setHeader("Set-Cookie",f)};function _serialize(a,b,c){var d=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,e=c||{},f=e.encode||encodeURIComponent;if("function"!=typeof f)throw new TypeError("option encode is invalid");if(!d.test(a))throw new TypeError("argument name is invalid");var g=f(b);if(g&&!d.test(g))throw new TypeError("argument val is invalid");var h=a+"="+g;if(null!=e.maxAge){var i=e.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");h+="; Max-Age="+Math.floor(i)}if(e.domain){if(!d.test(e.domain))throw new TypeError("option domain is invalid");h+="; Domain="+e.domain}if(e.path){if(!d.test(e.path))throw new TypeError("option path is invalid");h+="; Path="+e.path}else h+="; Path=/";if(e.expires){var j=e.expires;if("function"==typeof e.expires.toUTCString)j=e.expires.toUTCString();else{var k=new Date(e.expires);j=k.toUTCString()}h+="; Expires="+j}if(e.httpOnly&&(h+="; HttpOnly"),e.secure&&(h+="; Secure"),e.sameSite){var l="string"==typeof e.sameSite?e.sameSite.toLowerCase():e.sameSite;switch(l){case!0:h+="; SameSite=Strict";break;case"lax":h+="; SameSite=Lax";break;case"strict":h+="; SameSite=Strict";break;case"none":h+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid");}}return h}var _default={set};exports.default=_default;