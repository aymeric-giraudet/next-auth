"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _client=_interopRequireDefault(require("../oauth/client")),_crypto=_interopRequireDefault(require("crypto"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var _default=(a,b)=>{var{callbackUrl:c}=a,d=(0,_client.default)(a);if(a.version&&a.version.startsWith("2.")){var g=d.getAuthorizeUrl({redirect_uri:a.callbackUrl,scope:a.scope,state:_crypto.default.randomBytes(64).toString("hex")});if(a.authorizationUrl.includes("?")){var e=new URL(a.authorizationUrl),f="".concat(e.origin).concat(e.pathname,"?");g=g.replace(f,a.authorizationUrl+"&")}b(null,g)}else d.getOAuthRequestToken((c,d)=>{c&&console.error("GET_AUTHORISATION_URL_ERROR",c);var e="".concat(a.authorizationUrl,"?oauth_token=").concat(d);b(c,e)},c)};exports.default=_default;